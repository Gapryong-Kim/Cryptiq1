<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CryptiQ ‚Äî Cipher Info & Guides</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <style>
    /* === Page-specific additions on top of your global style.css === */

    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
    }

    /* Desktop sidebar (fixed) */
    .sidebar {
      position: fixed;
      top: 65px; /* match navbar height */
      left: 0;
      width: 260px;
      height: calc(100% - 65px);
      background: var(--panel-2);
      border-right: 1px solid var(--line);
      overflow-y: auto;
      padding: 18px 18px 24px;
      box-sizing: border-box;
      z-index: 900;
      transform: translateX(0);
      transition: transform 0.25s ease;
    }
    .sidebar h3 {
      font-size: 0.95rem;
      margin: 0 0 10px 0;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .sidebar a {
      display: block;
      color: var(--text-dim);
      text-decoration: none;
      margin: 6px 0;
      padding: 8px 10px;
      border-radius: 8px;
      transition: background 0.2s, color 0.2s, box-shadow 0.25s ease;
    }
    .sidebar a:hover {
      background: var(--accent);
      color: #0f0f0f;
      box-shadow: 0 0 12px var(--accent-soft-2);
    }

    /* Blurred overlay (mobile only) */
    #sidebar-overlay {
      position: fixed;
      inset: 65px 0 0 0; /* sit below navbar */
      background: rgba(0,0,0,0.45);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 850;
      opacity: 0;
      display: none;
      transition: opacity 0.25s ease;
    }

    /* Main content */
    .content {
      margin-left: 280px; /* sidebar width + spacing */
      padding: 110px 60px 60px 60px;
      max-width: 900px;
    }
    .content h1 {
      color: var(--accent);
      margin-bottom: 12px;
      font-size: 2rem;
    }
    .content h2 {
      color: var(--accent);
      margin-top: 44px;
      margin-bottom: 12px;
      border-bottom: 1px solid var(--accent);
      padding-bottom: 6px;
    }
    .content h3 {
      color: var(--accent);
      margin-top: 20px;
      margin-bottom: 8px;
      font-size: 1.05rem;
    }
    .content p {
      line-height: 1.65;
      color: var(--text);
      margin: 10px 0 14px;
    }
    .content ul, .content ol {
      color: var(--text);
      line-height: 1.6;
      margin: 8px 0 16px 22px;
    }

    /* Example & Tip boxes */
    .example-box, .tip, .note {
      transition: box-shadow 0.25s ease, transform 0.2s ease;
      border-radius: 10px;
    }
    .example-box:hover, .tip:hover, .note:hover {
      box-shadow: 0 0 18px var(--accent-soft-2);
      transform: translateY(-1px);
    }
    .example-box {
      background: var(--panel-2);
      border: 1px solid var(--line-2);
      padding: 12px 14px;
      margin: 10px 0 18px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      white-space: pre-wrap;
      color: var(--accent);
    }
    .tip {
      background: var(--panel);
      border-left: 4px solid var(--accent);
      padding: 10px 14px;
      margin: 12px 0 18px;
      color: var(--text-dim);
      font-size: 0.95rem;
    }
    .note {
      background: linear-gradient(180deg, rgba(255,215,0,0.06), transparent);
      border: 1px dashed rgba(255,215,0,0.35);
      padding: 10px 14px;
      margin: 12px 0 18px;
      color: var(--text);
      font-size: 0.95rem;
    }

    /* Mobile: drawer behavior + open button */
    .sidebar-toggle {
      display: none;
    }

    @media (max-width: 980px) {
      .content {
        margin-left: 0;
        padding: 110px 20px 60px 20px;
      }

      .sidebar {
        transform: translateX(-110%); /* hidden by default */
        width: 84%;
        max-width: 340px;
        border-right: 1px solid var(--line);
        box-shadow: 6px 0 24px rgba(0,0,0,0.35);
      }
      .sidebar.open {
        transform: translateX(0);
      }

      .sidebar-toggle {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: var(--panel);
        color: var(--text);
        border: 1px solid var(--line);
        padding: 10px 14px;
        border-radius: 10px;
        cursor: pointer;
        margin: 6px 0 16px;
        transition: background 0.2s ease, border-color 0.2s ease;
      }
      .sidebar-toggle:hover {
        border-color: var(--accent);
        background: var(--panel-2);
      }
      .sidebar-toggle .dot {
        width: 6px; height: 6px; border-radius: 50%; background: var(--accent);
        box-shadow: 0 0 8px var(--accent-soft);
      }
    }

    html { scroll-behavior: smooth; }
  </style>
</head>
<body>
  {% include 'base_nav.html' %}

  <!-- Sidebar (desktop) / Drawer (mobile) -->
  <aside class="sidebar" id="sidebar">
    <h3>Quick Jump</h3>
    <a href="#intro">Overview</a>
    <a href="#substitution">Substitution Cipher</a>
    <a href="#caesar">Caesar Cipher</a>
    <a href="#vigenere">Vigen√®re Cipher</a>
    <a href="#affine">Affine Cipher</a>
    <a href="#playfair">Playfair Cipher</a>
    <a href="#hill">Hill Cipher</a>
    <a href="#autokey">Autokey Cipher</a>
    <a href="#transposition">Transposition Cipher</a>
    <a href="#bacon">Bacon Cipher</a>
    <a href="#morse">Morse & Enigma Intro</a>
  </aside>

  <!-- Blurred overlay for mobile -->
  <div id="sidebar-overlay"></div>

  <main class="content">
    <!-- Mobile open button -->
    <button id="sidebar-toggle" class="sidebar-toggle" aria-label="Open section menu">
      ‚ò∞ Menu <span class="dot" aria-hidden="true"></span>
    </button>

    <!-- ==================== CONTENT ==================== -->

    <section id="intro">
      <h1>Cryptography Overview</h1>
      <p>
        Cryptography is the art and science of transforming information to conceal its meaning. 
        Classical ciphers are built on two core ideas:
      </p>
      <ul>
        <li><strong>Substitution</strong> ‚Äî swap characters for other characters or symbols.</li>
        <li><strong>Transposition</strong> ‚Äî keep characters but change their order.</li>
      </ul>
      <p>
        In practice, breaking ciphers blends pattern recognition, probability, and smart heuristics.
        CryptiQ aims to teach these techniques and provide hands-on tools to apply them.
      </p>
      <div class="tip">
        üí° <strong>Tip:</strong> Start by inspecting letter frequencies, digram (two-letter) and trigram (three-letter) counts,
        and repeated patterns. Short words like <em>the</em>, <em>of</em>, <em>to</em> are powerful anchors.
      </div>
    </section>

    <section id="substitution">
      <h2>Substitution Cipher</h2>
      <p>
        A monoalphabetic substitution maps each plaintext letter to exactly one ciphertext letter across the entire message.
        It‚Äôs simple but surprisingly rich: English statistics (like E/T/A prevalence) drive most successful attacks.
      </p>
      <div class="example-box">
Plaintext:  HELLO WORLD
Ciphertext: QEBBY TBOBD
Key (partial): H‚ÜíQ, E‚ÜíE, L‚ÜíB, O‚ÜíY, W‚ÜíT, R‚ÜíD
      </div>
      <h3>Breaking Strategy</h3>
      <ol>
        <li>Count letter frequencies; map top ciphertext letters to ETAOIN.</li>
        <li>Look for common patterns: <code>TH</code>, <code>HE</code>, <code>ING</code>, <code>ED</code>, <code>THE</code>.</li>
        <li>Use word shapes: <code>A_BA</code> ‚Üí <em>ALSO</em> / <em>AREA</em>, etc.</li>
        <li>Iteratively refine the key; swap pairs that improve language score.</li>
      </ol>
      <div class="note">
        Our solver uses n-gram (bi/tri/quad) language models + simulated annealing / steepest-ascent polishing to converge on highly probable plaintexts.
      </div>
    </section>

    <section id="caesar">
      <h2>Caesar Cipher</h2>
      <p>
        The Caesar cipher shifts each letter by a fixed amount <em>k</em> modulo 26. Encryption:
        <code>E(x) = (x + k) mod 26</code>. Decryption: <code>D(y) = (y ‚àí k) mod 26</code>.
      </p>
      <div class="example-box">
Shift k = 3
Plaintext:  HELLO
Ciphertext: KHOOR
      </div>
      <h3>How to Break</h3>
      <ul>
        <li>Try all 25 shifts and pick the one with highest dictionary hits / language score.</li>
        <li>Index of Coincidence (IoC) often matches monoalphabetic English.</li>
      </ul>
    </section>

    <section id="vigenere">
      <h2>Vigen√®re Cipher</h2>
      <p>
        Uses a repeating key to vary the shift for each letter. Each key letter defines a Caesar shift (A=0, B=1, ‚Ä¶).
      </p>
      <div class="example-box">
Key: KEY
Plaintext:  ATTACKATDAWN
Ciphertext: KXRKGIKXREQF
      </div>
      <h3>Breaking Steps</h3>
      <ol>
        <li><strong>Find key length</strong> via Kasiski or Friedman/IoC.</li>
        <li><strong>Split columns</strong> by key length and solve each as a Caesar cipher.</li>
        <li><strong>Assemble</strong> the full decryption with the recovered key.</li>
      </ol>
      <div class="tip">Try multiple candidate lengths; the correct key usually maximizes language likelihood.</div>
    </section>

    <section id="affine">
      <h2>Affine Cipher</h2>
      <p>
        Affine combines multiply + add: <code>E(x) = (a¬∑x + b) mod 26</code>, where <code>a</code> is coprime with 26.
        Decryption uses the modular inverse <code>a‚Åª¬π</code>.
      </p>
      <div class="example-box">
a = 5, b = 8
Plaintext:  AFFINE
Ciphertext: IHHWVCS
      </div>
      <h3>Attack Idea</h3>
      <ul>
        <li>Find two plaintext‚Äìciphertext pairs and solve the simultaneous congruences for <code>a</code> and <code>b</code>.</li>
        <li>Otherwise brute force all valid <code>a</code> (œÜ(26)=12) and <code>b</code> (0..25) and rank by language score.</li>
      </ul>
    </section>

    <section id="playfair">
      <h2>Playfair Cipher</h2>
      <p>
        Playfair encrypts digraphs using a 5√ó5 key square built from a keyword (I/J combined). It avoids single-letter frequency weaknesses.
      </p>
      <div class="example-box">
Key: MONARCHY  ‚áí  Key square (I/J merged)
Encrypt: HE LL OX  ‚Üí  GI YI Q...
      </div>
      <h3>Decryption Rules</h3>
      <ul>
        <li>Same row: move left; same column: move up; rectangle: swap columns within corners.</li>
        <li>Padding X (or Q) is inserted to break double letters and to complete pairs.</li>
      </ul>
      <div class="tip">Heuristics + hill-climbing on the key square are standard for breaking Playfair.</div>
    </section>

    <section id="hill">
      <h2>Hill Cipher</h2>
      <p>
        A polygraphic cipher using matrix multiplication mod 26. Blocks of size n are multiplied by an n√ón key matrix.
      </p>
      <div class="example-box">
Key 2√ó2: [[3,3],[2,5]]
Plaintext (HI): [7,8]^T ‚Üí Cipher (RC)
      </div>
      <h3>Breaking</h3>
      <ul>
        <li>Recover the key matrix from enough plaintext‚Äìciphertext block pairs.</li>
        <li>Ensure the matrix has a modular inverse (det coprime with 26).</li>
      </ul>
    </section>

    <section id="autokey">
      <h2>Autokey Cipher</h2>
      <p>
        Starts with a short key and appends plaintext to extend it, reducing periodicity compared to Vigen√®re.
      </p>
      <div class="example-box">
Key: KEY (then plaintext letters appended during encryption)
      </div>
      <div class="tip">Known-plaintext segments can unravel the autokey chain.</div>
    </section>

    <section id="transposition">
      <h2>Transposition Ciphers</h2>
      <p>
        Rearrange letters without substitution. Frequency distribution remains similar to plaintext.
      </p>
      <div class="example-box">
Columnar Key: ZEBRAS
Plaintext:  WEAREDISCOVEREDRUN
Ciphertext: EVLNEACDTKESEAQROFO
      </div>
      <h3>Breaking</h3>
      <ul>
        <li>Guess/score columnar widths; reconstruct by reading columns in key order.</li>
        <li>Use digram/trigram scoring to find the best arrangement.</li>
      </ul>
    </section>

    <section id="bacon">
      <h2>Bacon Cipher</h2>
      <p>
        Encodes each letter as a 5-bit A/B pattern, often steganographically embedded via font changes or letter casing.
      </p>
      <div class="example-box">
AABAA AABAB ABBAB ...  ‚Üí  HELLO
      </div>
      <div class="note">Look for two-style texts (e.g., lower/UPPER toggles). Extract A/B streams and decode 5-bit chunks.</div>
    </section>

    <section id="morse">
      <h2>Morse & Enigma Intro</h2>
      <p>
        Morse represents letters with dots and dashes (variable-length codes). Enigma (WWII) used rotors and plugboard wiring
        that changed the substitution at every step, producing a huge keyspace.
      </p>
      <div class="example-box">
Morse: HELLO ‚Üí ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ¬∑ ¬∑‚àí¬∑¬∑ ¬∑‚àí¬∑¬∑ ‚àí‚àí‚àí
Enigma: Rotor wiring + ring settings + plugboard pairs ‚áí daily key sheets
      </div>
      <div class="tip">Frequency methods alone fail on Enigma; crib-based attacks + bombe-style searches were key historically.</div>
    </section>

  </main>

  <script>
    (function () {
      const sidebar = document.getElementById('sidebar');
      const toggle = document.getElementById('sidebar-toggle');
      const overlay = document.getElementById('sidebar-overlay');

      function openSidebar() {
        sidebar.classList.add('open');
        overlay.style.display = 'block';
        requestAnimationFrame(() => { overlay.style.opacity = '1'; });
      }
      function closeSidebar() {
        sidebar.classList.remove('open');
        overlay.style.opacity = '0';
        setTimeout(() => { overlay.style.display = 'none'; }, 200);
      }

      if (toggle) {
        toggle.addEventListener('click', (e) => {
          e.stopPropagation();
          if (sidebar.classList.contains('open')) closeSidebar();
          else openSidebar();
        });
      }
      if (overlay) overlay.addEventListener('click', closeSidebar);
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeSidebar(); });

      // Close drawer when clicking a sidebar link (mobile UX)
      sidebar.querySelectorAll('a').forEach(a => {
        a.addEventListener('click', () => {
          if (window.matchMedia('(max-width: 980px)').matches) closeSidebar();
        });
      });
    })();
  </script>
</body>
</html>
